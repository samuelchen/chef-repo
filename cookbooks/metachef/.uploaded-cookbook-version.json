{"recipes":[{"name":"default.rb","path":"recipes/default.rb","checksum":"37d6baf7c7cfeac9fc99fc666f0f3fb4","specificity":"default"}],"definitions":[{"name":"daemon_user.rb","path":"definitions/daemon_user.rb","checksum":"5328e38d6456847ba001cd6b91a05b77","specificity":"default"},{"name":"standard_dirs.rb","path":"definitions/standard_dirs.rb","checksum":"45532d1d2a7235743415a0653f9dc3d0","specificity":"default"},{"name":"kill_old_service.rb","path":"definitions/kill_old_service.rb","checksum":"b950afaee9d2aef1b8c21f489712f508","specificity":"default"}],"libraries":[{"name":"aspects.rb","path":"libraries/aspects.rb","checksum":"dd92f61f3b98da6dd98a975cb3bd22d4","specificity":"default"},{"name":"aspect.rb","path":"libraries/aspect.rb","checksum":"e30b01cc492f3ce2d84df32ef7a1be7d","specificity":"default"},{"name":"discovery_lol.rb","path":"libraries/discovery_lol.rb","checksum":"27e17c3402dffd53764c4649d08fbf78","specificity":"default"},{"name":"component.rb","path":"libraries/component.rb","checksum":"ea37f3a45f72a16cef27ce46dfac6471","specificity":"default"},{"name":"attr_struct.rb","path":"libraries/attr_struct.rb","checksum":"d6875f46dc7d428ee8d88562f641d61e","specificity":"default"},{"name":"dump_aspects.rb","path":"libraries/dump_aspects.rb","checksum":"10e80c00196634a91f41c8af018f2eeb","specificity":"default"},{"name":"discovery.rb","path":"libraries/discovery.rb","checksum":"d78f53bbf9c790db4fb1bb5e7a5724fb","specificity":"default"},{"name":"metachef.rb","path":"libraries/metachef.rb","checksum":"e1c05aa3599e7599f6962773bc0683ce","specificity":"default"},{"name":"node_utils.rb","path":"libraries/node_utils.rb","checksum":"90495707af4d567da1b2359466616f02","specificity":"default"},{"name":"cookbook_utils.rb","path":"libraries/cookbook_utils.rb","checksum":"756047b9180f15d130596e2a41037d9d","specificity":"default"}],"attributes":[{"name":"default.rb","path":"attributes/default.rb","checksum":"745c5624b9d91128db316c04464f820e","specificity":"default"}],"files":[],"templates":[],"resources":[],"providers":[],"root_files":[{"name":"metadata.json","path":"metadata.json","checksum":"668fe72499f3d585dbe3119e6b642a07","specificity":"default"},{"name":"README.md","path":"README.md","checksum":"209ed11f5f152cf282cf11ded1fd2a5e","specificity":"default"},{"name":".watchr","path":".watchr","checksum":"ab5b02f6fe4fa329b87d65de28b20d47","specificity":"default"},{"name":"Gemfile","path":"Gemfile","checksum":"61c1e0559e9837e39a8b092afcb16e4d","specificity":"default"},{"name":".rspec","path":".rspec","checksum":"75b96abd85288b3decd7f9ffceaf32b6","specificity":"default"}],"metadata":{"name":"metachef","description":"Cluster orchestration -- coordinates discovery, integration and decoupling of cookbooks","long_description":"# metachef chef cookbook\n\nCluster orchestration -- coordinates discovery, integration and decoupling of cookbooks\n\n## Overview\n\nCookbooks repeatably express these and other aspects:\n* \"I launch these daemons: ...\"\n* \"I haz a bukkit, itz naem '/var/log/lol'\"\n* \"I have a dashboard at 'http://....:...'\"\n* ... and much more.\n\nWouldn't it be nice if announcing a log directory caused...\n  - my log rotation system to start rotating my logs?\n  - a 'disk free space' gauge to be added to the monitoring dashboard for that service?\n  - flume (or whatever) began picking up my logs and archiving them to a predictable location?\n  - in the case of standard apache logs, a listener to start counting the rate of requests, 200s, 404s and so forth?\nSimilarly, announcing ports should mean\n  - the firewall and security groups configure themselves correspondingly\n  - the monitor system starts regularly pinging the port for uptime and latency \n  - and pings the interfaces that it should *not* appear on to ensure the firewall is in place?\n\nCluster chef make those aspects standardized and predictable, and provides integration and discovery hooks. The key is to make integration *inevitable*: No more forgetting to rotate or monitor a service, or having a config change over here screw up a dependent system over there.\n\n__________________________________________________________________________\n\n(*below is a planning document and may not perfectly reflect reality*)\n\nFIXME: **update for version_3 release**\n\nAttributes are scoped by *cookbook* and then by *component*.\n* If I declare `i_haz_a_service_itz('redis)`, it will look in `node[:redis]`.\n* If I declare `i_haz_a_service_itz('hadoop-namenode')`, it will look in `node[:hadoop]` for cookbook-wide concerns and `node[:hadoop][:namenode]` for component-specific concerns.\n\n* The cookbook scope is always named for its cookbook. Its attributes live in`node[:cookbook_name]`.\n  - if everything in the cookbook shares a concern, it sits at cookbook level. So the hadoop log directory (shared by all its components) is at `(scratch_root)/hadoop/log`.\n* If there is only one component, it can be implicitly named for its cookbook. In this case, it is omitted: the component attributes live in `node[:cookbook_name]` (which is the same as the component name).\n* If there are multiple components, they will live in `node[:cookbook_name][:component_name]` (eg `[:hadoop][:namenode]` or `[:flume][:master]`. In file names, these become `(whatever)/cookbook_name/component_name/(whatever)`; in other cases they are joined as `cookbook_name-component_name`.\n\nAllow nodes to discover the location for a given service at runtime, adapting when new services register.\n\n### Discovery\n\nAllow nodes to discover the location for a given service at runtime, adapting\nwhen new services register.\n\n#### Operations:\n\n* register for a service. A timestamp records the last registry.\n* discover all chef nodes that have registered for the given service.\n* discover the most recent chef node for that service.\n* get the 'public_ip' for a service -- the address that nodes in the larger\n  world should use\n* get the 'public_ip' for a service -- the address that nodes on the local\n  subnet / private cloud should use\n\n#### Implementation\n\nNodes register a service by calling `announce`, which sets a hash containing\n'timestamp' (the time of registry) and other metadata passed in.\n\n## Recipes \n\n* `default`                  - Base configuration for metachef\n\n## Integration\n\nSupports platforms: debian and ubuntu\n\n\n\n## Attributes\n\n* `[:metachef][:conf_dir]`            -  (default: \"/etc/metachef\")\n* `[:metachef][:log_dir]`             -  (default: \"/var/log/metachef\")\n* `[:metachef][:home_dir]`            -  (default: \"/etc/metachef\")\n* `[:metachef][:user]`                -  (default: \"root\")\n* `[:users][:root][:primary_group]`   -  (default: \"root\")\n\n## License and Author\n\nAuthor::                Philip (flip) Kromer - Infochimps, Inc (<coders@infochimps.com>)\nCopyright::             2011, Philip (flip) Kromer - Infochimps, Inc\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n> readme generated by [cluster_chef](http://github.com/infochimps/cluster_chef)'s cookbook_munger\n","maintainer":"Philip (flip) Kromer - Infochimps, Inc","maintainer_email":"coders@infochimps.com","license":"Apache 2.0","platforms":{"debian":">= 0.0.0","ubuntu":">= 0.0.0"},"dependencies":{},"recommendations":{},"suggestions":{},"conflicting":{},"providing":{"metachef":">= 0.0.0"},"replacing":{},"attributes":{"metachef/conf_dir":{"display_name":"","description":"","default":"/etc/metachef","choice":[],"calculated":false,"type":"string","required":"optional","recipes":[]},"metachef/log_dir":{"display_name":"","description":"","default":"/var/log/metachef","choice":[],"calculated":false,"type":"string","required":"optional","recipes":[]},"metachef/home_dir":{"display_name":"","description":"","default":"/etc/metachef","choice":[],"calculated":false,"type":"string","required":"optional","recipes":[]},"metachef/user":{"display_name":"","description":"","default":"root","choice":[],"calculated":false,"type":"string","required":"optional","recipes":[]},"users/root/primary_group":{"display_name":"","description":"","default":"root","choice":[],"calculated":false,"type":"string","required":"optional","recipes":[]}},"groupings":{},"recipes":{"metachef::default":"Base configuration for metachef","metachef":""},"version":"3.0.4","source_url":"","issues_url":""},"version":"3.0.4","name":"metachef-3.0.4","cookbook_name":"metachef","frozen?":false,"chef_type":"cookbook_version","json_class":"Chef::CookbookVersion"}